<!DOCTYPE html>
<html>
	<head>
		<title>Craig</title>
		<link rel="manifest" href="manifest.json">
		<link rel="shortcut icon" href="/images/favicon.png" />
		
		<script>
		if ('serviceWorker' in navigator) {
		  window.addEventListener('load', function() {
		    navigator.serviceWorker.register('/service_worker.js')
		      .then(reg => {
			console.log('Service worker registered! ðŸ˜Ž', reg);
				reg.pushManager.subscribe();
		      })
		      .catch(err => {
			console.log('ðŸ˜¥ Service worker registration failed: ', err);
		      });
		  });
		}
		</script>
	</head>
	<body>
		<div id="test">Hello There 2</div>
		
		<button onclick="allowPush()">Push API Allow</button>
		<script>
			function allowPush() {
				//navigator.serviceWorker.subscribe();
			}
		</script>
		
		<button onclick="notifyMe()">Test</button>
		<script>
			function notifyMe() {
			  // Let's check if the browser supports notifications
			  if (!("Notification" in window)) {
				alert("This browser does not support desktop notification");
			  }

			  // Let's check whether notification permissions have already been granted
			  else if (Notification.permission === "granted") {
				// If it's okay let's create a notification
				var notification = new Notification("Hi there!");
			  }

			  // Otherwise, we need to ask the user for permission
			  else if (Notification.permission !== "denied") {
				Notification.requestPermission().then(function (permission) {
				  // If the user accepts, let's create a notification
				  if (permission === "granted") {
					var notification = new Notification("Hi there!");
				  }
				});
			  }

			  // At last, if the user has denied notifications, and you 
			  // want to be respectful there is no need to bother them any more.
			}
		</script>
		
	</body>
</html>
